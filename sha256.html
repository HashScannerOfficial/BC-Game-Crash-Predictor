<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="x-ua-compatible" content="ie=edge"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SHA-256 Tool</title>
  <meta name="description" content="Online SHA-256 and HMAC-SHA-256 hash generator with encoding options."/>
  <meta property="og:title" content="SHA-256 Tool"/>
  <meta property="og:description" content="Online SHA-256 and HMAC-SHA-256 hash generator with encoding options."/>
  <meta property="og:type" content="website"/>
  <meta property="og:image" content="assets/logo.svg"/>
  <meta property="og:site_name" content="SHA-256 Tool"/>
  <link rel="stylesheet" href="css/style.css"/>
</head>
<body>
  <div id="appRoot">
    <aside id="navCol" aria-hidden="true"></aside>
    <main id="mainPanel" role="main">
      <h1>SHA-256 / HMAC Generator</h1>
      <form id="f" class="tool-form" onsubmit="return false;" autocomplete="off" novalidate>
        <label for="m">Message</label>
        <textarea id="m" name="message" placeholder="Type or paste textâ€¦" rows="6"></textarea>

        <label for="k">Key (HMAC)</label>
        <input id="k" name="key" type="text" placeholder="Optional key for HMAC"/>

        <div class="controls">
          <button id="btnRun" type="button">Digest</button>
          <button id="btnClear" type="button">Clear</button>
        </div>

        <label for="out">Result</label>
        <pre id="out" aria-live="polite" readonly></pre>
      </form>
    </main>
  </div>

  <!-- core scripts (kept as you provided) -->
  <script src="js/sha256-hard-obf.js" defer></script>
  <script src="js/hmac.js" defer></script>
  <script src="js/encodings.js" defer></script>
  <script src="js/clipboard.js" defer></script>

  <!-- small bootstrap to wire basic UI quickly (non-tracking, minimal) -->
  <script>
  (function(){
    'use strict';
    var $ = function(sel){ return document.querySelector(sel); };
    var $all = function(sel){ return document.querySelectorAll(sel); };
    var run = $('#btnRun'), clr = $('#btnClear'), msg = $('#m'), key = $('#k'), out = $('#out');

    function show(v){
      if(typeof v === 'string') out.textContent = v;
      else if(Array.isArray(v)) out.textContent = v.join('');
      else out.textContent = String(v);
    }

    function compute(){
      var text = msg.value || '';
      var k = key.value || '';
      try {
        if(k){
          // prefer HMAC if key provided
          if(window.sha256 && typeof window.sha256.hmac === 'function'){
            show( window.sha256.hmac.hex(k, text) );
          } else if(window.hmac && typeof window.hmac === 'function'){
            show( hmac.hex(k, text) );
          } else {
            show('HMAC implementation not found');
          }
        } else {
          if(window.sha256 && typeof window.sha256 === 'function'){
            show( sha256(text) );
          } else if(window.method && typeof window.method === 'function'){
            show( method(text) );
          } else {
            show('SHA-256 implementation not found');
          }
        }
      } catch (e) {
        show('Error: ' + (e && e.message ? e.message : String(e)));
      }
    }

    run.addEventListener('click', compute, false);
    msg.addEventListener('keydown', function(e){ if(e.ctrlKey && e.key==='Enter'){ compute(); } }, false);
    clr.addEventListener('click', function(){ msg.value=''; key.value=''; out.textContent=''; }, false);

    // optional: auto-load previously stored input (local-only)
    try {
      var s = localStorage.getItem('sha_msg_v1');
      if(s) msg.value = s;
    } catch(e){}

    window.addEventListener('beforeunload', function(){
      try { localStorage.setItem('sha_msg_v1', msg.value||''); } catch(e){}
    });
  })();
  </script>
</body>
</html>
